CREATE TABLE client_list (id BIGINT AUTO_INCREMENT, is_paid TINYINT(1) NOT NULL, paidtill DATE, name VARCHAR(255) NOT NULL, email VARCHAR(255) UNIQUE, plan_id BIGINT, period_id BIGINT, INDEX period_id_idx (period_id), INDEX plan_id_idx (plan_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE domain_list (id BIGINT AUTO_INCREMENT, domain VARCHAR(255) NOT NULL UNIQUE, expires_at DATE, server VARCHAR(255), reg_id BIGINT, client_id BIGINT, sslexp datetime, last_check datetime, INDEX client_id_idx (client_id), INDEX reg_id_idx (reg_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE hosting_plans (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL UNIQUE, price FLOAT(18, 2) NOT NULL, description TEXT, memory VARCHAR(255) NOT NULL, site_count BIGINT NOT NULL, db_count BIGINT NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE page (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL, alias VARCHAR(255) UNIQUE, body TEXT, is_activated TINYINT(1) DEFAULT '1' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE period (id BIGINT AUTO_INCREMENT, title VARCHAR(255), period BIGINT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE permission (id BIGINT AUTO_INCREMENT, credential VARCHAR(255) NOT NULL UNIQUE, description VARCHAR(255), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE reg_list (id BIGINT AUTO_INCREMENT, address VARCHAR(255) NOT NULL UNIQUE, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE seo (id BIGINT AUTO_INCREMENT, url TEXT NOT NULL, h1 TEXT, title TEXT, description TEXT, body text, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE server_list (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL UNIQUE, ip_address VARCHAR(255) NOT NULL UNIQUE, comment TEXT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user (id BIGINT AUTO_INCREMENT, username VARCHAR(128) NOT NULL UNIQUE, fname VARCHAR(255), iname VARCHAR(255), oname VARCHAR(255), image VARCHAR(255), email VARCHAR(128), salt VARCHAR(128), password VARCHAR(128), gender TINYINT(1), birth_date DATETIME, is_active TINYINT(1) DEFAULT '0', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX name_idx_idx (username), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_group (id BIGINT AUTO_INCREMENT, title VARCHAR(128) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_group_permissions (user_group_id BIGINT, permission_id BIGINT, PRIMARY KEY(user_group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE user_group_users (user_id BIGINT, user_group_id BIGINT, PRIMARY KEY(user_id, user_group_id)) ENGINE = INNODB;
CREATE TABLE user_log (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, log_type VARCHAR(50) NOT NULL, model VARCHAR(50) NOT NULL, model_id BIGINT NOT NULL, log TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX model_idx_idx (model), INDEX model_id_idx_idx (model_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_permissions (user_id BIGINT, permission_id BIGINT, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
CREATE TABLE cs_setting (id INT AUTO_INCREMENT, name VARCHAR(255) NOT NULL UNIQUE, type VARCHAR(255) DEFAULT 'input' NOT NULL, widget_options LONGTEXT, value LONGTEXT, setting_group VARCHAR(255) DEFAULT NULL, setting_default LONGTEXT DEFAULT NULL, variables LONGTEXT DEFAULT NULL, slug VARCHAR(255), UNIQUE INDEX cs_setting_sluggable_idx (slug), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE client_list ADD CONSTRAINT client_list_plan_id_hosting_plans_id FOREIGN KEY (plan_id) REFERENCES hosting_plans(id) ON DELETE SET NULL;
ALTER TABLE client_list ADD CONSTRAINT client_list_period_id_period_id FOREIGN KEY (period_id) REFERENCES period(id) ON DELETE SET NULL;
ALTER TABLE domain_list ADD CONSTRAINT domain_list_reg_id_reg_list_id FOREIGN KEY (reg_id) REFERENCES reg_list(id) ON DELETE CASCADE;
ALTER TABLE domain_list ADD CONSTRAINT domain_list_client_id_client_list_id FOREIGN KEY (client_id) REFERENCES client_list(id) ON DELETE SET NULL;
ALTER TABLE user_group_permissions ADD CONSTRAINT user_group_permissions_permission_id_permission_id FOREIGN KEY (permission_id) REFERENCES permission(id);
ALTER TABLE user_group_users ADD CONSTRAINT user_group_users_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE user_group_users ADD CONSTRAINT user_group_users_user_group_id_user_group_id FOREIGN KEY (user_group_id) REFERENCES user_group(id) ON DELETE CASCADE;
ALTER TABLE user_log ADD CONSTRAINT user_log_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE user_permissions ADD CONSTRAINT user_permissions_permission_id_permission_id FOREIGN KEY (permission_id) REFERENCES permission(id);
